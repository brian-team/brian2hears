steps:

  - script: conda create -c conda-forge -n test_env python=$(python.version) brian2 pip pytest six future
    displayName: 'Install dependencies'

  - script: |
      conda activate test_env
      python -m pip install --no-deps --ignore-installed --user .
    displayName: 'Install Brian2Hears'

  - script: |
      conda activate test_env
      cd ..  # move out of the source directory to avoid direct import
      pytest --pyargs brian2hears
    displayName: 'Run tests'
